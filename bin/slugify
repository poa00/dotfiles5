#!/usr/bin/env sh
# Output a string as a slug
# https://github.com/Mayeu/slugify/blob/master/slugify
#
# Usage:
#
#   printf 'Foo bar baz' | slugify -d _

delim='-'
while getopts hd: opt; do
    case $opt in
    d) delim="$OPTARG";;
    h) awk 'NR == 1 { next } /^$/ { exit } { print substr($0, 3) }' "$0"
       exit ;;
    esac
done
shift $(( OPTIND - 1 ))

LANG=POSIX LC_ALL=POSIX sed -e 's/[^[:alnum:]]/'"$delim"'/g' \
    | tr -s "$delim" \
    | tr A-Z a-z \
    | sed -e 's/'"$delim"'$//'
