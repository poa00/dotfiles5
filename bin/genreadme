#!/bin/sh
# Generate a README for all $DOTFILES/bin scripts

find "${HOME}/src/dotfiles/bin" -type f -print0 |
    xargs -0 -r -n1 awk '
        FILENAME ~ "README" { next }
        /^#?[a-zA-Z ]+/ {
            sub(/^# /, "", $0)
            sub(/^.*\//, "", FILENAME)
            print FILENAME " -- " $0
            exit
        }
    ' |
    sort
