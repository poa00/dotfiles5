#!/bin/sh
# Generate a README for all $DOTFILES/bin scripts

# TODO: include staged or untracked files here?
git --git-dir=$HOME/src/dotfiles.git ls-files -z -- bin |
    xargs -0 -r -n1 awk '
        FILENAME ~ "README" { next }
        /^#?[a-zA-Z ]+/ {
            sub(/^# /, "", $0)
            sub(/^.*\//, "", FILENAME)
            print FILENAME " -- " $0
            exit
        }
    ' |
    sort
